<!-- search bar -->
<div class="fullwidth">
    <div fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="0">
        <input [(ngModel)]="searchStr" class="mat-elevation-z2 searchbar" fxFlex="60%" placeholder="search...">
        <div fxFlex="5%"></div>
        <select class="mat-elevation-z2 searchbar" fxFlex="35%" [(ngModel)]="searchStack">
            <option value="">any</option>
            <option *ngFor="let s of allStacks">{{s}}</option>
        </select>
    </div>
</div>
<!-- advanced filters: select tags -->
<!-- <div class="panel-group" id="accordion">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a href="#collapse1" data-toggle="collapse" data-parent="#accordion">Filter by Tags</a>
            </h4>
        </div>
        <div id="collapse1" class="panel-collapse collapse">
            <div class="panel-body">
                <div class="col-sm-2" *ngFor="let c of allTags">
                    <p><i>{{c.categoryName}}</i></p>
                    <p *ngFor="let t of c.tags"><input type="checkbox" (click)="addFilterTag($event.target.value)" value="{{t.tagName}}"> {{t.tagName}}</p>
                </div>
            </div>
        </div>
    </div>
</div> -->

<mat-card *ngFor="let q of allQuestions | searchfilter:searchStr:searchStack" [routerLink]="['/questions', q.questionId]">
    <mat-card-content class="container" fxLayout fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="10px" fxLayoutGap.xs="0">
        <mat-divider [vertical]="true"></mat-divider>
        <div class="question" fxFlex="75%">
            <mat-card-title>{{q.questionTitle}}</mat-card-title>
            <p class="questionText">{{q.questionText | truncate : 100}}</p>
            <p>Tags: <mat-chip *ngIf="q.stack" color="primary" selected="true">{{q.stack}}</mat-chip><mat-chip selected="true" color="accent" *ngFor="let t of q.tagsString">{{t}}</mat-chip></p>
        </div>
        <div class="summary" fxFlex="20%">
            <div class="row">
                <div fxFlex="50%">
                    <p>Answers</p>
                    <p>{{q.answers.length}}</p>
                </div>
                <div fxFlex="50%">
                    <p>Votes</p>
                    <p>{{q.votes}}</p>
                </div>
            </div>
            <p class="smallinfo">Asked by {{q.askedByFirstName}} {{q.askedByLastName}}</p>
            <p class="smallinfo">{{q.createdAt | date: 'dd MMM yyyy HH:mm a'}}</p>
        </div>
    </mat-card-content>  
</mat-card>

<footer>
    <p>Couldn't find your answer?</p>
    <button mat-raised-button color="accent" [routerLink]="['/questions/ask']">Ask a Question</button>
</footer>